<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Node Sample App</title>

    <!-- CSS -->
    <!-- load bootstrap and our own personal stylesheet -->
    <link href="//maxcdn.bootstrapcdn.com/bootswatch/3.2.0/superhero/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.12/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.12/addons/p5.sound.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io();
        function chat() {
            console.log(socket);
            socket.emit('chat message', $('#m').val());
	          socket.emit('freq', Number($('#m').val()));
            //$('#m').val('');
            return false;
        }
        socket.on('chat message', function(msg) {
            $('#messages').append($('<li>').text(msg));
        });
	      socket.on('freq', function(freq) {
          var osc = new p5.Oscillator();
          osc.setType('sine'); //this can be altered as well to make it more interesting
          osc.freq(freq);
          osc.amp(0.5, 0.05);
          osc.start();
        });
    </script>
</head>
<body>

<div class="container">
    <h1>Chat!</h1>
    <ul id="messages"></ul>
    <form onsubmit="return false" onclick="chat()" action="">
      <input id="m" value="440" autocomplete="off" /><button>Send</button>
    </form>
</div>

</body>
</html>
